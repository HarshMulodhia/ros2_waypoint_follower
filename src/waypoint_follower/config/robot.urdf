<?xml version="1.0"?>
<robot name="autonomous_waypoint_follower">

  <!-- ========================================
       AUTONOMOUS NAVIGATION ROBOT
       Designed for Waypoint Following Tasks
       ======================================== -->

  <!-- ROBOT DIMENSIONS & PROPERTIES -->
  <!-- Overall Robot: 0.8m × 0.5m × 0.4m, 12kg -->
  <!-- Wheels: 0.15m radius, 0.4m separation -->
  <!-- Caster: 0.07m radius front wheel -->

  <!-- ========== BASE LINK (CHASSIS) ========== -->
  <link name="base_link">
    <inertial>
      <mass value="12.0"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="0.64" ixy="0" ixz="0" iyy="0.88" iyz="0" izz="1.04"/>
    </inertial>
    
    <!-- Chassis Visual: Professional metallic blue -->
    <visual>
      <geometry>
        <box size="0.8 0.5 0.4"/>
      </geometry>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <material name="chassis_blue">
        <color rgba="0.05 0.25 0.85 1.0"/>
      </material>
    </visual>
    
    <!-- Chassis Collision -->
    <collision>
      <geometry>
        <box size="0.8 0.5 0.4"/>
      </geometry>
      <origin xyz="0 0 0" rpy="0 0 0"/>
    </collision>

    <!-- Visual: Battery/Power compartment indicator (orange accent) -->
    <visual>
      <geometry>
        <box size="0.7 0.4 0.05"/>
      </geometry>
      <origin xyz="0 0 0.175" rpy="0 0 0"/>
      <material name="accent_orange">
        <color rgba="0.95 0.6 0.2 0.8"/>
      </material>
    </visual>
  </link>

  <!-- ========== LEFT DRIVE WHEEL ========== -->
  <link name="left_wheel">
    <inertial>
      <mass value="1.0"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="0.0432" ixy="0" ixz="0" iyy="0.0432" iyz="0" izz="0.01125"/>
    </inertial>
    
    <visual>
      <geometry>
        <cylinder radius="0.15" length="0.12"/>
      </geometry>
      <origin xyz="0 0 0" rpy="1.5708 0 0"/>
      <material name="wheel_dark">
        <color rgba="0.1 0.1 0.1 1.0"/>
      </material>
    </visual>
    
    <collision>
      <geometry>
        <cylinder radius="0.15" length="0.12"/>
      </geometry>
      <origin xyz="0 0 0" rpy="1.5708 0 0"/>
    </collision>

    <!-- Tread pattern visual (decorative) -->
    <visual>
      <geometry>
        <cylinder radius="0.16" length="0.096"/>
      </geometry>
      <origin xyz="0 0 0" rpy="1.5708 0 0"/>
      <material name="tread_texture">
        <color rgba="0.2 0.2 0.2 1.0"/>
      </material>
    </visual>
  </link>

  <!-- ========== RIGHT DRIVE WHEEL ========== -->
  <link name="right_wheel">
    <inertial>
      <mass value="1.0"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="0.0432" ixy="0" ixz="0" iyy="0.0432" iyz="0" izz="0.01125"/>
    </inertial>
    
    <visual>
      <geometry>
        <cylinder radius="0.15" length="0.12"/>
      </geometry>
      <origin xyz="0 0 0" rpy="1.5708 0 0"/>
      <material name="wheel_dark">
        <color rgba="0.1 0.1 0.1 1.0"/>
      </material>
    </visual>
    
    <collision>
      <geometry>
        <cylinder radius="0.15" length="0.12"/>
      </geometry>
      <origin xyz="0 0 0" rpy="1.5708 0 0"/>
    </collision>

    <!-- Tread pattern visual (decorative) -->
    <visual>
      <geometry>
        <cylinder radius="0.16" length="0.096"/>
      </geometry>
      <origin xyz="0 0 0" rpy="1.5708 0 0"/>
      <material name="tread_texture">
        <color rgba="0.2 0.2 0.2 1.0"/>
      </material>
    </visual>
  </link>

  <!-- ========== FRONT CASTER WHEEL ========== -->
  <link name="caster_wheel">
    <inertial>
      <mass value="0.3"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="0.00012" ixy="0" ixz="0" iyy="0.00012" iyz="0" izz="0.00012"/>
    </inertial>
    
    <visual>
      <geometry>
        <sphere radius="0.07"/>
      </geometry>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <material name="caster_silver">
        <color rgba="0.7 0.7 0.7 1.0"/>
      </material>
    </visual>
    
    <collision>
      <geometry>
        <sphere radius="0.07"/>
      </geometry>
      <origin xyz="0 0 0" rpy="0 0 0"/>
    </collision>
  </link>

  <!-- ========== SENSOR LINKS ========== -->
  <!-- IMU Sensor -->
  <link name="imu_link"/>

  <!-- LIDAR/Laser Scanner -->
  <link name="laser_link">
    <inertial>
      <mass value="0.08"/>
      <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
    </inertial>
    
    <visual>
      <geometry>
        <cylinder radius="0.03" length="0.07"/>
      </geometry>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <material name="sensor_red">
        <color rgba="1.0 0.15 0.15 1.0"/>
      </material>
    </visual>
    
    <collision>
      <geometry>
        <cylinder radius="0.03" length="0.07"/>
      </geometry>
    </collision>
  </link>

  <!-- Depth Camera -->
  <link name="camera_link">
    <inertial>
      <mass value="0.05"/>
      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0001"/>
    </inertial>
    
    <visual>
      <geometry>
        <box size="0.04 0.08 0.04"/>
      </geometry>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <material name="sensor_black">
        <color rgba="0.15 0.15 0.15 1.0"/>
      </material>
    </visual>
  </link>

  <!-- ========== JOINTS: DRIVE WHEELS ========== -->
  <!-- Left Wheel Joint - Connects base_link to left_wheel -->
  <joint name="left_wheel_joint" type="continuous">
    <parent link="base_link"/>
    <child link="left_wheel"/>
    <axis xyz="0 1 0"/>
    <origin xyz="0 0.2 -0.05" rpy="0 0 0"/>
    <limit effort="30" velocity="10"/>
    <dynamics damping="0.7" friction="0.0"/>
  </joint>

  <!-- Right Wheel Joint - Connects base_link to right_wheel -->
  <joint name="right_wheel_joint" type="continuous">
    <parent link="base_link"/>
    <child link="right_wheel"/>
    <axis xyz="0 1 0"/>
    <origin xyz="0 -0.2 -0.05" rpy="0 0 0"/>
    <limit effort="30" velocity="10"/>
    <dynamics damping="0.7" friction="0.0"/>
  </joint>

  <!-- ========== JOINTS: CASTER WHEEL ========== -->
  <!-- Caster Wheel Joint - Front support wheel (fixed/ball joint) -->
  <joint name="caster_wheel_joint" type="fixed">
    <parent link="base_link"/>
    <child link="caster_wheel"/>
    <origin xyz="0.35 0 -0.17" rpy="0 0 0"/>
  </joint>

  <!-- ========== JOINTS: SENSORS ========== -->
  <!-- IMU Joint - Mounted at center of base_link -->
  <joint name="imu_joint" type="fixed">
    <parent link="base_link"/>
    <child link="imu_link"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

  <!-- Laser Scanner Joint - Top-mounted sensor -->
  <joint name="laser_joint" type="fixed">
    <parent link="base_link"/>
    <child link="laser_link"/>
    <origin xyz="0 0 0.25" rpy="0 0 0"/>
  </joint>

  <!-- Camera Joint - Front-mounted depth camera -->
  <joint name="camera_joint" type="fixed">
    <parent link="base_link"/>
    <child link="camera_link"/>
    <origin xyz="0.4 0 0.1" rpy="0 0.2 0"/>
  </joint>

  <!-- ========== MATERIAL DEFINITIONS ========== -->
  <!-- Reusable material definitions for all components -->
  
  <!-- Blue chassis color -->
  <material name="chassis_blue">
    <color rgba="0.05 0.25 0.85 1.0"/>
  </material>
  
  <!-- Dark wheel color -->
  <material name="wheel_dark">
    <color rgba="0.1 0.1 0.1 1.0"/>
  </material>
  
  <!-- Tread texture -->
  <material name="tread_texture">
    <color rgba="0.2 0.2 0.2 1.0"/>
  </material>
  
  <!-- Orange accent color -->
  <material name="accent_orange">
    <color rgba="0.95 0.6 0.2 0.8"/>
  </material>
  
  <!-- Caster wheel color -->
  <material name="caster_silver">
    <color rgba="0.7 0.7 0.7 1.0"/>
  </material>
  
  <!-- Sensor colors -->
  <material name="sensor_red">
    <color rgba="1.0 0.15 0.15 1.0"/>
  </material>
  
  <material name="sensor_black">
    <color rgba="0.15 0.15 0.15 1.0"/>
  </material>

</robot>
